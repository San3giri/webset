<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Karakter Keren | Website Pendidikan Karakter SMP</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Poppins', sans-serif;
            scroll-behavior: smooth;
        }
        .gradient-text {
            background-image: linear-gradient(to right, #38bdf8, #6366f1);
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
        }
        .card-hover {
            transition: transform 0.3s ease-in-out, box-shadow 0.3s ease-in-out;
        }
        .card-hover:hover {
            transform: translateY(-10px);
            box-shadow: 0 20px 25px -5px rgb(0 0 0 / 0.1), 0 8px 10px -6px rgb(0 0 0 / 0.1);
        }
        .loader {
            border: 4px solid #f3f3f3;
            border-top: 4px solid #38bdf8;
            border-radius: 50%;
            width: 30px;
            height: 30px;
            animation: spin 1s linear infinite;
        }
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
    </style>
</head>
<body class="bg-gray-900 text-white">

    <!-- Header / Navigasi -->
    <header class="bg-gray-900/80 backdrop-blur-sm sticky top-0 z-50 border-b border-gray-700">
        <div class="container mx-auto px-6 py-4 flex justify-between items-center">
            <h1 class="text-2xl font-bold gradient-text">Karakter Keren</h1>
            <nav class="hidden md:flex space-x-8 items-center">
                <a href="#pilar" class="hover:text-sky-400 transition-colors">Pilar Karakter</a>
                <a href="#misi" class="hover:text-sky-400 transition-colors">Misi Harian</a>
                <a href="#kisah" class="hover:text-sky-400 transition-colors">Studi Kasus</a>
            </nav>
            <a href="#misi" class="bg-indigo-600 hover:bg-indigo-500 transition-all font-bold py-2 px-4 rounded-lg">Mulai Misi!</a>
        </div>
    </header>

    <main class="container mx-auto px-6 py-12">

        <!-- Hero Section -->
        <section class="text-center my-16">
            <h2 class="text-4xl md:text-6xl font-bold leading-tight mb-4">
                Jadilah <span class="gradient-text">Versi Terbaik</span> dari Dirimu!
            </h2>
            <p class="text-gray-400 max-w-2xl mx-auto text-lg">
                Selamat datang di markas para Ksatria Karakter! Di sini, kita akan belajar menjadi pribadi yang jujur, tangguh, dan peduli lewat misi-misi seru. Siap naik level?
            </p>
        </section>

        <!-- Pilar Karakter Section -->
        <section id="pilar" class="my-20">
            <h3 class="text-3xl font-bold text-center mb-12">6 Pilar Utama Karakter Keren</h3>
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
                <!-- Card 1: Jujur -->
                <div class="bg-gray-800 p-8 rounded-2xl border border-gray-700 card-hover">
                    <div class="w-16 h-16 bg-sky-500/10 rounded-xl flex items-center justify-center mb-6">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8 text-sky-400" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z" /></svg>
                    </div>
                    <h4 class="text-2xl font-bold mb-2">Kejujuran</h4>
                    <p class="text-gray-400">Berani berkata benar dan bertindak lurus, bahkan saat tidak ada yang melihat. Kejujuran adalah kekuatan super pertamamu.</p>
                </div>

                <!-- Card 2: Tanggung Jawab -->
                <div class="bg-gray-800 p-8 rounded-2xl border border-gray-700 card-hover">
                    <div class="w-16 h-16 bg-indigo-500/10 rounded-xl flex items-center justify-center mb-6">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8 text-indigo-400" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 1.5V6m0 12v4.5m8.485-14.985L16.5 6M7.5 18l-3.985-3.985M18 16.5l3.985-3.985M6 7.5L2.015 3.515M22.5 12H18m-12 0H1.5" /></svg>
                    </div>
                    <h4 class="text-2xl font-bold mb-2">Tanggung Jawab</h4>
                    <p class="text-gray-400">Menyelesaikan tugas yang diberikan, mengakui kesalahan, dan siap menanggung akibat dari pilihanmu. Kamu adalah kapten dari dirimu sendiri.</p>
                </div>

                <!-- Card 3: Disiplin -->
                <div class="bg-gray-800 p-8 rounded-2xl border border-gray-700 card-hover">
                     <div class="w-16 h-16 bg-emerald-500/10 rounded-xl flex items-center justify-center mb-6">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8 text-emerald-400" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z" /></svg>
                    </div>
                    <h4 class="text-2xl font-bold mb-2">Disiplin</h4>
                    <p class="text-gray-400">Melakukan apa yang harus dilakukan, tepat waktu, dan konsisten. Disiplin adalah jembatan antara cita-cita dan pencapaian.</p>
                </div>
                
                <!-- Card 4: Peduli Sesama -->
                <div class="bg-gray-800 p-8 rounded-2xl border border-gray-700 card-hover">
                     <div class="w-16 h-16 bg-rose-500/10 rounded-xl flex items-center justify-center mb-6">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8 text-rose-400" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z" /></svg>
                    </div>
                    <h4 class="text-2xl font-bold mb-2">Peduli Sesama</h4>
                    <p class="text-gray-400">Mampu merasakan apa yang orang lain rasakan (empati), menolong tanpa pamrih, dan menjaga perasaan teman.</p>
                </div>

                <!-- Card 5: Percaya Diri -->
                <div class="bg-gray-800 p-8 rounded-2xl border border-gray-700 card-hover">
                     <div class="w-16 h-16 bg-amber-500/10 rounded-xl flex items-center justify-center mb-6">
                         <svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8 text-amber-400" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M5 3v4M3 5h4M6 17v4m-2-2h4m5-16l2.293 2.293a1 1 0 010 1.414L11 15l-4 1 1-4 6.293-6.293a1 1 0 011.414 0z" /></svg>
                    </div>
                    <h4 class="text-2xl font-bold mb-2">Percaya Diri</h4>
                    <p class="text-gray-400">Yakin pada kemampuan diri sendiri, berani mencoba hal baru, dan tidak takut gagal. Kamu unik dan berharga!</p>
                </div>

                <!-- Card 6: Kerja Keras -->
                <div class="bg-gray-800 p-8 rounded-2xl border border-gray-700 card-hover">
                     <div class="w-16 h-16 bg-fuchsia-500/10 rounded-xl flex items-center justify-center mb-6">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8 text-fuchsia-400" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M13 10V3L4 14h7v7l9-11h-7z" /></svg>
                    </div>
                    <h4 class="text-2xl font-bold mb-2">Kerja Keras</h4>
                    <p class="text-gray-400">Berusaha sekuat tenaga untuk mencapai tujuan. Tidak ada jalan pintas menuju kesuksesan yang sejati.</p>
                </div>
            </div>
        </section>

        <!-- Misi Harian Section -->
        <section id="misi" class="my-20">
            <h3 class="text-3xl font-bold text-center mb-12">Misi Harian Karakter Keren</h3>
            <div class="bg-gray-800 rounded-2xl p-8 border border-gray-700 mb-8">
                <p class="text-center text-gray-400 mb-8">Selesaikan misi ini untuk melatih otot karaktermu. Klik "Selesai!" jika kamu berhasil melakukannya hari ini.</p>
                <div id="mission-list" class="space-y-4">
                    <!-- Misi akan ditambahkan oleh JavaScript -->
                </div>
            </div>

            <!-- Gemini Mission Generator -->
            <div class="bg-gray-800 rounded-2xl p-8 border border-indigo-700">
                <h4 class="text-2xl font-bold text-center mb-2">âœ¨ Butuh Tantangan Baru?</h4>
                <p class="text-center text-gray-400 mb-6">Ketik satu sifat yang ingin kamu latih (contoh: sabar, berani, peduli), dan AI akan membuatkan misi khusus untukmu!</p>
                <div class="flex flex-col md:flex-row gap-4 max-w-xl mx-auto">
                    <input type="text" id="custom-mission-input" class="w-full bg-gray-700 text-white px-4 py-2 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500" placeholder="Contoh: Lebih rajin belajar">
                    <button id="generate-mission-btn" class="w-full md:w-auto bg-indigo-600 hover:bg-indigo-500 transition-all font-bold py-2 px-6 rounded-lg whitespace-nowrap">Buat Misi</button>
                </div>
                <div id="custom-mission-result" class="mt-6 text-center p-6 bg-gray-900/50 rounded-lg min-h-[100px] flex items-center justify-center">
                    <p class="text-gray-500">Misi kustom akan muncul di sini...</p>
                </div>
            </div>
        </section>

        <!-- Studi Kasus Section -->
        <section id="kisah" class="my-20">
            <h3 class="text-3xl font-bold text-center mb-12">Studi Kasus & Analisis AI</h3>
            <div class="bg-indigo-900/50 p-8 rounded-2xl text-center border border-indigo-700">
                 <h4 class="text-2xl font-bold mb-4">Dilema di Kantin</h4>
                 <p class="text-gray-300 max-w-2xl mx-auto mb-6">
                     Kamu tidak sengaja melihat temanmu mengambil jajanan lebih tapi hanya membayar sebagian. Penjual di kantin tidak menyadarinya. Apa yang akan kamu lakukan?
                 </p>
                 <div id="dilemma-options" class="flex flex-col md:flex-row justify-center gap-4">
                     <button data-choice="A" class="dilemma-btn bg-gray-700 hover:bg-gray-600 p-3 rounded-lg transition-colors">A. Pura-pura tidak lihat.</button>
                     <button data-choice="B" class="dilemma-btn bg-gray-700 hover:bg-gray-600 p-3 rounded-lg transition-colors">B. Menegurnya pelan-pelan setelahnya.</button>
                     <button data-choice="C" class="dilemma-btn bg-gray-700 hover:bg-gray-600 p-3 rounded-lg transition-colors">C. Langsung lapor ke penjual kantin.</button>
                 </div>
                 <p class="text-sm text-indigo-400 mt-6">Setiap pilihan punya konsekuensi. Pikirkan mana yang paling mencerminkan karakter jujur dan peduli.</p>
                 
                 <div id="ai-analysis-section" class="mt-8 text-left hidden">
                    <button id="get-analysis-btn" class="w-full bg-sky-600 hover:bg-sky-500 transition-all font-bold py-3 px-6 rounded-lg mb-6 flex items-center justify-center gap-2">
                        <span>âœ¨ Minta Analisis AI</span>
                    </button>
                    <div id="ai-analysis-result" class="p-6 bg-gray-900/50 rounded-lg whitespace-pre-wrap">
                        <p class="text-gray-500">Analisis dari AI akan muncul di sini...</p>
                    </div>
                 </div>
            </div>
        </section>

    </main>

    <!-- Footer -->
    <footer class="border-t border-gray-700 mt-12">
        <div class="container mx-auto px-6 py-8 text-center text-gray-400">
            <p>&copy; 2025 ulum DR. Dibuat untuk Generasi Hebat Indonesia.</p>
        </div>
    </footer>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // --- Bagian Misi Harian Statis ---
            const missions = [
                { title: 'Misi Kejujuran', description: 'Mengembalikan barang yang kamu temukan kepada pemiliknya.' },
                { title: 'Misi Tanggung Jawab', description: 'Mengerjakan PR atau tugas sekolah tanpa disuruh.' },
                { title: 'Misi Disiplin', description: 'Bangun pagi tepat waktu tanpa menunda alarm.' },
                { title: 'Misi Peduli', description: 'Membantu teman yang sedang kesulitan memahami pelajaran.' },
                { title: 'Misi Percaya Diri', description: 'Memberanikan diri bertanya atau menjawab di kelas.' },
                { title: 'Misi Kerja Keras', description: 'Belajar 15 menit lebih lama dari biasanya.' }
            ];

            const missionListContainer = document.getElementById('mission-list');
            missions.forEach((mission, index) => {
                const missionEl = document.createElement('div');
                missionEl.className = 'bg-gray-700/50 p-4 rounded-lg flex flex-col md:flex-row items-center justify-between gap-4';
                missionEl.innerHTML = `
                    <div class="text-center md:text-left">
                        <p class="font-bold text-lg">${mission.title}</p>
                        <p class="text-gray-400 text-sm">${mission.description}</p>
                    </div>
                    <button data-mission-id="${index}" class="mission-btn w-full md:w-auto bg-sky-600 hover:bg-sky-500 transition-colors font-semibold py-2 px-6 rounded-lg whitespace-nowrap">
                        Selesai!
                    </button>
                `;
                missionListContainer.appendChild(missionEl);
            });

            missionListContainer.addEventListener('click', function(e) {
                if (e.target.classList.contains('mission-btn')) {
                    const button = e.target;
                    button.textContent = 'Kerja Bagus!';
                    button.disabled = true;
                    button.classList.remove('bg-sky-600', 'hover:bg-sky-500');
                    button.classList.add('bg-emerald-600', 'cursor-not-allowed');
                }
            });
            
            // --- Gemini API Call Logic ---
            const API_KEY = ""; // Biarkan kosong, akan di-handle oleh environment
            const API_URL = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-09-2025:generateContent?key=${API_KEY}`;
            
            async function callGemini(prompt) {
                const payload = {
                    contents: [{ parts: [{ text: prompt }] }]
                };

                try {
                    const response = await fetch(API_URL, {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify(payload)
                    });

                    if (!response.ok) {
                        throw new Error(`HTTP error! status: ${response.status}`);
                    }

                    const result = await response.json();
                    if (result.candidates && result.candidates.length > 0) {
                        return result.candidates[0].content.parts[0].text;
                    }
                    return "Maaf, AI tidak dapat memberikan respon saat ini. Coba lagi nanti.";
                } catch (error) {
                    console.error("Error calling Gemini API:", error);
                    return "Terjadi kesalahan saat menghubungi AI. Periksa koneksi internetmu.";
                }
            }
            
            // --- Fitur 1: Generator Misi Kustom ---
            const customMissionInput = document.getElementById('custom-mission-input');
            const generateMissionBtn = document.getElementById('generate-mission-btn');
            const customMissionResult = document.getElementById('custom-mission-result');

            generateMissionBtn.addEventListener('click', async () => {
                const characterTrait = customMissionInput.value.trim();
                if (!characterTrait) {
                    customMissionResult.innerHTML = '<p class="text-amber-400">Harap masukkan sifat yang ingin dilatih.</p>';
                    return;
                }
                
                customMissionResult.innerHTML = '<div class="loader"></div>';
                generateMissionBtn.disabled = true;

                const prompt = `Anda adalah seorang mentor kreatif untuk siswa SMP. Seorang siswa ingin melatih sifat "${characterTrait}". Buatkan satu misi yang simpel, bisa dilakukan di dunia nyata, dan spesifik untuk hari ini. Buat judul misinya tebal dan deskripsinya singkat. Jawab hanya dengan judul dan deskripsi misi, tanpa kalimat pembuka atau penutup.`;
                
                const missionText = await callGemini(prompt);
                
                // Format hasil untuk ditampilkan
                const formattedText = missionText
                    .replace(/\*\*(.*?)\*\*/g, '<p class="font-bold text-lg text-white mb-2">$1</p>') // Bold text
                    .replace(/^(?!<p>)(.*)$/gm, '<p class="text-gray-300">$1</p>'); // Other text

                customMissionResult.innerHTML = `
                    <div>${formattedText}</div>
                    <button class="mission-btn mt-4 bg-sky-600 hover:bg-sky-500 transition-colors font-semibold py-2 px-6 rounded-lg">Selesai!</button>
                `;
                generateMissionBtn.disabled = false;
                customMissionInput.value = '';
            });

            customMissionResult.addEventListener('click', function(e){
                if (e.target.classList.contains('mission-btn')) {
                    const button = e.target;
                    button.textContent = 'Luar Biasa!';
                    button.disabled = true;
                    button.classList.remove('bg-sky-600', 'hover:bg-sky-500');
                    button.classList.add('bg-emerald-600', 'cursor-not-allowed');
                }
            });


            // --- Fitur 2: Analisis Dilema AI ---
            const dilemmaOptions = document.getElementById('dilemma-options');
            const aiAnalysisSection = document.getElementById('ai-analysis-section');
            const getAnalysisBtn = document.getElementById('get-analysis-btn');
            const aiAnalysisResult = document.getElementById('ai-analysis-result');
            let userChoice = null;
            const choiceMap = {
                A: "Pura-pura tidak lihat.",
                B: "Menegurnya pelan-pelan setelahnya.",
                C: "Langsung lapor ke penjual kantin."
            };

            dilemmaOptions.addEventListener('click', (e) => {
                if (e.target.classList.contains('dilemma-btn')) {
                    // Reset all buttons
                    dilemmaOptions.querySelectorAll('.dilemma-btn').forEach(btn => {
                        btn.classList.remove('bg-indigo-600');
                        btn.classList.add('bg-gray-700', 'hover:bg-gray-600');
                    });
                    
                    // Highlight selected button
                    const selectedBtn = e.target;
                    selectedBtn.classList.remove('bg-gray-700', 'hover:bg-gray-600');
                    selectedBtn.classList.add('bg-indigo-600');
                    userChoice = selectedBtn.dataset.choice;
                    aiAnalysisSection.classList.remove('hidden');
                }
            });

            getAnalysisBtn.addEventListener('click', async () => {
                if (!userChoice) {
                    aiAnalysisResult.innerHTML = '<p class="text-amber-400">Pilih salah satu opsi dilema terlebih dahulu.</p>';
                    return;
                }

                aiAnalysisResult.innerHTML = '<div class="loader"></div>';
                getAnalysisBtn.disabled = true;

                const prompt = `Anda adalah seorang mentor karakter untuk siswa SMP. Siswa memilih opsi "${choiceMap[userChoice]}" dalam dilema "Dilema di Kantin" di mana teman mengambil jajanan lebih tapi bayar sebagian. Analisis pilihan ini: jelaskan konsekuensi positif dan negatif, nilai karakter yang tercermin, dan saran untuk siswa. Jawab dalam bahasa Indonesia, singkat dan mudah dipahami.`;

                const analysisText = await callGemini(prompt);

                aiAnalysisResult.innerHTML = `<p class="text-white">${analysisText}</p>`;
                getAnalysisBtn.disabled = false;
            });
        });
    </script>
</body>
</html>
